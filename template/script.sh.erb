#!/usr/bin/env bash

echo "Starting main script..."
echo "TTT - $(date)"

set -x

# Load Anaconda3 module for Python
module load Anaconda3
module load GCC
    
# Debug: Check current directory and locate app.py
echo "Current working directory: $(pwd)"
echo "Files in current directory:"
ls -la
echo "Looking for app.py:"
find . -name "app.py" -type f 2>/dev/null || echo "app.py not found in current directory tree"
echo "BATCH_CONNECT_TEMPLATE_ROOT: ${BATCH_CONNECT_TEMPLATE_ROOT}"
echo "APP variable: ${APP}"

# activate the environment
. ${HOME}/env-chatbot/bin/activate

# launch the gradio application
python3 $APP

echo "TTT - $(date)"
